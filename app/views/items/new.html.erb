<div class="container mx-auto pt-3 py-24">
  <div class="flex flex-col items-center justify-center gap-12">
    <h1 class="text-lg font-medium text-center"><%= @item_list.name %></h1>

    <%= form_with(model: @item_list, local: true) do |f| %>
      <div class="flex flex-col items-start mt-6 gap-4">
        <% @original_items.each do |item| %>
          <div class="flex items-center gap-2">
            <%= check_box_tag "item_list[original_item_ids][]", item.id, item.selected, class: "checkbox checkbox-primary checkbox-sm" %>
            <%= item.name %>
            <%= link_to "✕", item_list_item_destroy_original_item_path(@item_list, item.id, id: item.id), data: { turbo_method: :delete }, class: "p-2 btn btn-ghost btn-circle btn-sm" %>
          </div>
        <% end %>

        <% @default_items.each do |item| %>
          <div class="flex items-center gap-2">
            <%= check_box_tag "item_list[default_item_ids][]", item.id, item.selected, class: "checkbox checkbox-primary checkbox-sm" %>
            <%= item.name %>
          </div>
        <% end %>
      </div>
      <%= f.submit "持ち物リストを保存", class: "btn btn-primary mt-4" %>
    <% end %>

    <button class="btn btn-primary" onclick="document.getElementById('addItemModal').showModal()">アイテムを追加</button>

    <dialog id="addItemModal" class="modal">
      <div class="modal-box bg-slate-50 w-96 mx-auto flex flex-col items-center py-12">
        <%= form_with model: @new_original_item, url: item_list_items_path(@item_list), local: true do |f| %>
          <label class="form-control w-full max-w-xs">
            <input type="text" placeholder="アイテムの名前", name="original_item[name]" class="input input-bordered w-full max-w-xs" required: true />
          </label>
          <div class="mt-4">
            <%= f.submit '追加', class: "btn btn-primary w-full" %>
          </div>
        <% end %>
    
        <div class="modal-action">
          <form method="dialog">
            <button class="btn btn-ghost">キャンセル</button>
          </form>
        </div>
      </div>
    </dialog>
  </div>
</div>
